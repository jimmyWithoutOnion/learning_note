# http 相关
资料来源： https://juejin.im/post/5d032b77e51d45777a126183
## http有哪些方法
http1.0有三种请求方法：GET，POST，HEAD
http2.0新增来物种请求方法：OPTIONS，PUT，DELETE，TRACE，CONNECT

## 这些方法的具体作用是什么
- GET：通常用于请求服务器发送某些资源
- HEAD：请求资源的头部信息，并且这些头部与HTTP GET方法方法请求时返回一致，该请求方法的一个使用场景是在下载一个大文件前先获取其大小再决定是否下载，以此可以节约带宽资源
- OPTIONS：用于获取目的资源搜支持的通讯选项 
- POST：发送数据给服务器
- PUT：用于新增资源或者使用请求中的有效负载替换目标资源的表现形式
- DELETE：用于删除指定的资源
- PATCH：用于对资源部分进行部分修改
- CONNECT：HTTP/1.1协议中预留给能够将连接改为管道方式对代理服务器
- TRACE：回显服务器收到对请求，主要用于测试或诊断

## GET和POST有什么区别
- 数据传输对方式不同：GET请求通过URL传输数据，POST的数据通过请求体传输
- 安全性不同：POST的数据因为在请求主体内，所以有一定的安全性，GET的数据在URL中，通过历史记录，缓存很容易查到数据信息
- 数据类型不同：GET只允许ASCII字符，而POST无限制
- GET无害：刷新、后退等浏览器操作GET请求是无害的，POST可能重复提交表单
- 特性不同：GET是安全（这里的安全是指只读的特性，就是使用这个方法不同引起服务器状态变化）且幂等（幂等的概念是指同一个请求方法执行多次和仅执行一次的效果完全相同），而POST是非安全非幂等
## PUT和POST都是给服务器发送新增资源，有什么区别
- put和post的区别是，put方式是幂等的：连续调用一次或多次的效果相同（无副作用），而post方法是非幂等的
- 通常情况下，put的URI指向的是具体单一资源，而post可以指向资源集合
- 举个例子，开发一个博客系统的，当我们要创建一篇文章的时候往往用 POST https://www.jianshu.com/articles, 这个请求的语义是，在articles的资源集合下创建一篇新的文章，如果我们多次提交这个请求会创建多个文章，这是非幂等的
- 而PUT https://www.jianshu.com/articles/8945793457 的语义是更新对应文章下的资源（比如修改作者名称），这个URI指向的就是单一资源，而且是幂等的，比如把名字「勒布朗」改成「戴维斯」，提交多少次都是「戴维斯」
- ps:「POST表示创建资源，PUT表示更新资源」这种说法是错误的，两个都能创建资源，根本区别在于幂等性

## PUT和PATCH都是给服务器发送修改资源，有什么区别
- PUT和PATCH都是更新资源，而PATCH用来对已知资源进行局部更新
- 比如我们有一篇文章对地址是https://www.jianshu.com/articles/8945793457, 这片文章可以表示为:
```javascript
article = {
    author: 'jyc',
    creationDate: '2019-12-30',
    content: '煎饼果子来一套',
    id: 8945793457
}
```
当我们要修改文章对作者时，我们可以直接发送PUT https://www.jianshu.com/articles/8945793457, 这个时候的数据应该是
```javascript
article = {
    author: 'xxx',
    creationDate: '2019-12-30',
    content: '煎饼果子来一套',
    id: 8945793457
}
```
这种直接覆盖的修改方式应该用PUT，但是如果你觉得不想每次都带有这么多无用的信息，可以发送PATCH https://www.jianshu.com/articles/8945793457, 这时候只需要：
```javascript
{
    author: 'xxx'
}
```

## 同样是重定向302，303，307有什么区别
- 302是http1.0的协议状态码，在http1.1的时候为了细化302状态码又出来了303和307
- 303明确表示客户端应该采用get方法获取资源，他会把POST请求变为GET请求进行重定向。307会遵照浏览器标准，不会从POST转成GET

## HTTP的keep-alive是干什么的
- 在早期的HTTP/1.0中，每次http请求都要创建一个连接，而创建连接的过程需要消耗资源和时间，为了减少资源消耗，缩短响应时间，就需要重用连接。在后来的协议中，引入了重用连接的机制，就是在http请求头中加入Connection: keep-alive来告诉对方这个请求响应完成后不要关闭，下一次还用这个请求继续交流。
- 优点:
1. 较少的CPU和内存使用（同时打开的连接变少了）
2. 允许请求和应答的HTTP管线化
3. 降低拥塞控制（TCP连接减少了）
4. 减少后续请求的延迟（无需在进行握手）
5. 报告错误无需关闭TCP连接

## HTTPS是如何保证安全的
- 对称加密：即通信的双方都使用用一个密钥进行加密，比如特务接头的暗号，就属于对称加密
- 对称加密虽然简单性能也好，但是无法解决首次把密匙发给对方的问题，很容易被hacker拦截密钥

- 非对称加密：
1. 私钥 + 公钥 = 密钥对
2. 即用私钥加密对数据，只有对应对公钥才能解密，用公钥加密对数据，只有用对应对私钥才能解密
3. 因为通信双方对手里都有一套自己对密钥对，通信之前双方会先把自己的公钥先发给对方
4. 然后对方拿这个公钥来加密数据响应给对方，等到了对方那里，对方在用自己的私钥进行解密

- 非对称加密虽然安全性更高，但带来的问题就是速度很慢，影响性能

- 解决方案：
那么结合两种加密方式，将对称加密的密钥使用非对称加密的公钥进行加密，然后发送出去，接收方使用私钥进行解密得到对称加密的密钥，然后双方使用对称加密进行沟通

- 此时带来一个中间人问题：
如果此时在客户端和服务器之间存在一个中间人，这个中间人只需要把原本双方通信互发的公钥，换成自己的公钥，这样中间人就可以轻松解密通信双方所发送的所有数据了

- 所以这时候需要一个安全的第三方颁发证书（CA），证明自己的身份，防止中间人攻击

